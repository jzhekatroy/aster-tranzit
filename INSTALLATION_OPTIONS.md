# –í–∞—Ä–∏–∞–Ω—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Phone Proxy System

## –í–∞—Ä–∏–∞–Ω—Ç 1: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –¥–ª—è –Ω–∞—á–∞–ª–∞)

**–¢–æ–ª—å–∫–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å + API + –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**  
–ë–µ–∑ Asterisk (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Ç–æ–º)

```bash
git clone https://github.com/jzhekatroy/aster-tranzit.git
cd aster-tranzit
chmod +x install-simple.sh
sudo ./install-simple.sh
```

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** ~3-5 –º–∏–Ω—É—Ç  
**–ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è:**
- ‚úÖ MariaDB
- ‚úÖ Python Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –ø–æ—Ä—Ç—É 5000
- ‚ùå Asterisk (–Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –•–æ—á–µ—à—å –ø—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–µ–π–∫–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞
- Asterisk —É—Å—Ç–∞–Ω–æ–≤–∏—à—å –ø–æ–∑–∂–µ –≤—Ä—É—á–Ω—É—é

---

## –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

**–í—Å—ë –≤–∫–ª—é—á–µ–Ω–æ: –≤–µ–± + API + –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö + Asterisk**

```bash
git clone https://github.com/jzhekatroy/aster-tranzit.git
cd aster-tranzit
chmod +x install.sh
sudo ./install.sh
```

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** ~15-20 –º–∏–Ω—É—Ç (–∫–æ–º–ø–∏–ª—è—Ü–∏—è Asterisk)  
**–ß—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è:**
- ‚úÖ MariaDB
- ‚úÖ Python Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –ø–æ—Ä—Ç—É 5000
- ‚úÖ Asterisk (–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤)
- ‚úÖ ODBC –¥—Ä–∞–π–≤–µ—Ä—ã
- ‚úÖ –í—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–∑—É
- –ì–æ—Ç–æ–≤ –ø–æ–¥–æ–∂–¥–∞—Ç—å 15-20 –º–∏–Ω—É—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –°—Ä–∞–∑—É –±—É–¥–µ—à—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å SIP —Ç—Ä–∞–Ω–∫–∏

---

## –í–∞—Ä–∏–∞–Ω—Ç 3: –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∏–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å.

–°–º. –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é: [INSTALL.md](INSTALL.md)

---

## –ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å?

### üü¢ –ù–∞—á–Ω–∏ —Å **–í–∞—Ä–∏–∞–Ω—Ç–∞ 1** (install-simple.sh)
- –ë—ã—Å—Ç—Ä–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∏—à—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ—Ç–æ–º –¥–æ–±–∞–≤–∏—à—å Asterisk –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

### üü° –ò—Å–ø–æ–ª—å–∑—É–π **–í–∞—Ä–∏–∞–Ω—Ç 2** (install.sh)
- –ï—Å–ª–∏ —Å—Ä–∞–∑—É –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- –ï—Å–ª–∏ –µ—Å—Ç—å –≤—Ä–µ–º—è –ø–æ–¥–æ–∂–¥–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é
- –ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ SIP —Ç—Ä–∞–Ω–∫–∏

### üî¥ –ò—Å–ø–æ–ª—å–∑—É–π **–í–∞—Ä–∏–∞–Ω—Ç 3** (–≤—Ä—É—á–Ω—É—é)
- –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —Ç–≤–æ–µ–π —Å–∏—Å—Ç–µ–º–µ
- –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ï—Å–ª–∏ —Ä–∞–∑–±–∏—Ä–∞–µ—à—å—Å—è –≤ Linux

---

## –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
```bash
# –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://your-server-ip:5000

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å —á–µ—Ä–µ–∑ curl
curl http://localhost:5000/health
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
systemctl status phone-proxy
systemctl status mariadb
systemctl status asterisk  # –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

### –õ–æ–≥–∏
```bash
journalctl -u phone-proxy -f
```

---

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Asterisk –ø–æ—Å–ª–µ —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏–ª —á–µ—Ä–µ–∑ `install-simple.sh` –∏ —Ç–µ–ø–µ—Ä—å –Ω—É–∂–µ–Ω Asterisk:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
apt-get install -y build-essential wget libssl-dev libncurses5-dev \
    libnewt-dev libxml2-dev linux-headers-$(uname -r) libsqlite3-dev \
    uuid-dev libjansson-dev libedit-dev

# –°–∫–∞—á–∞–π –∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–π Asterisk
cd /usr/src
wget https://downloads.asterisk.org/pub/telephony/asterisk/asterisk-20.10.0.tar.gz
tar -xzf asterisk-20.10.0.tar.gz
cd asterisk-20.10.0
./contrib/scripts/install_prereq install -y
./configure --with-jansson-bundled --with-pjproject-bundled
make -j$(nproc)
make install
make samples
make config

# –ù–∞—Å—Ç—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cd /path/to/aster-tranzit
cp asterisk/res_odbc.conf /etc/asterisk/
cp asterisk/func_odbc.conf /etc/asterisk/
cat asterisk/extensions.conf >> /etc/asterisk/extensions.conf

# –£—Å—Ç–∞–Ω–æ–≤–∏ ODBC
apt-get install -y unixodbc unixodbc-dev odbc-mariadb
cp asterisk/odbc.ini.example /etc/odbc.ini

# –ó–∞–ø—É—Å—Ç–∏ Asterisk
systemctl start asterisk
systemctl enable asterisk
```

---

## –ü—Ä–æ–±–ª–µ–º—ã?

–°–º. [INSTALL.md](INSTALL.md) —Ä–∞–∑–¥–µ–ª Troubleshooting

